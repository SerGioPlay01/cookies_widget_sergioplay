<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>Cookie Widget Integration Examples | React, Vue, WordPress, Google Analytics</title>
    <meta name="description" content="Ready-made Cookie Widget integration examples for React, Vue.js, WordPress, Google Analytics 4, Yandex.Metrica. Step-by-step instructions and copy-paste code.">
    <meta name="keywords" content="cookie widget examples, cookie banner integration, React cookie, Vue cookie, WordPress GDPR, Google Analytics GDPR">
    <meta name="author" content="SerGioPlay">
    <meta name="robots" content="index, follow">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://cookies-widget-sergioplay.vercel.app/examples.html">
    
    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://cookies-widget-sergioplay.vercel.app/examples.html">
    <meta property="og:title" content="Cookie Widget Integration Examples">
    <meta property="og:description" content="Ready-made Cookie Widget integration examples for popular frameworks and services">
    <meta property="og:image" content="https://cookies-widget-sergioplay.vercel.app/favicon_folder/android-chrome-512x512.png">
    
    <!-- Favicons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon_folder/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon_folder/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon_folder/favicon-16x16.png">
    <link rel="manifest" href="/favicon_folder/manifest.json">
    <link rel="shortcut icon" href="/favicon_folder/favicon.ico">
    <meta name="theme-color" content="#4CAF50">
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="cookie-banner.css">
    <link rel="stylesheet" href="i18n.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="index.html" style="text-decoration: none; color: inherit;">
                    <span class="nav-logo">üç™</span>
                    <span class="nav-title">Cookie Widget</span>
                </a>
            </div>
            <div class="nav-menu">
                <a href="index.html#features" class="nav-link" data-i18n="nav.features">Features</a>
                <a href="index.html#installation" class="nav-link" data-i18n="nav.installation">Installation</a>
                <a href="documentation.html" class="nav-link" data-i18n="nav.docs">Documentation</a>
                <a href="examples.html" class="nav-link active" data-i18n="nav.examples">Examples</a>
                <a href="tools.html" class="nav-link" data-i18n="nav.tools">Tools</a>
                <a href="index.html#support" class="nav-link" data-i18n="nav.support">Support</a>
                
                <!-- Language Selector -->
                <div class="language-selector" id="languageSelector">
                    <button class="language-btn" id="languageBtn">
                        <span class="language-flag" id="currentFlag">EN</span>
                        <span class="language-text" id="currentLang">English</span>
                        <span class="language-arrow">‚ñº</span>
                    </button>
                    <div class="language-dropdown" id="languageDropdown">
                        <!-- Languages will be populated by i18n.js -->
                    </div>
                </div>
                
                <a href="https://github.com/SerGioPlay01/cookies_widget_sergioplay" class="nav-link nav-link--github" target="_blank">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                    GitHub
                </a>
            </div>
        </div>
    </nav>

    <style>
        /* Language Selector Styles */
        .language-selector {
            position: relative;
            display: inline-block;
        }

        .language-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 8px;
            padding: 0.5rem 0.75rem;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .language-btn:hover {
            background: rgba(255, 255, 255, 1);
            border-color: #4CAF50;
            color: #4CAF50;
        }

        .language-flag {
            font-size: 1rem;
            line-height: 1;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            font-size: 0.75rem;
            letter-spacing: 0.5px;
        }

        .language-text {
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .language-arrow {
            transition: transform 0.3s ease;
            opacity: 0.7;
        }

        .language-btn:hover .language-arrow {
            opacity: 1;
        }

        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            backdrop-filter: blur(20px);
            min-width: 180px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
            z-index: 1001;
            overflow: hidden;
        }

        .language-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .language-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .language-option:last-child {
            border-bottom: none;
        }

        .language-option:hover {
            background: rgba(76, 175, 80, 0.1);
            color: #4CAF50;
        }

        .language-option.active {
            background: #4CAF50;
            color: white;
        }

        .language-option.active:hover {
            background: #45a049;
        }

        .language-option .language-flag {
            font-size: 0.75rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .language-option span:last-child {
            font-weight: 500;
        }

        /* Mobile styles for language selector */
        @media (max-width: 768px) {
            .language-selector {
                margin-top: 1rem;
                width: 100%;
            }
            
            .language-btn {
                width: 100%;
                justify-content: center;
                padding: 0.75rem 1rem;
            }
            
            .language-dropdown {
                position: static;
                width: 100%;
                margin-top: 0.5rem;
                transform: none;
                opacity: 1;
                visibility: visible;
            }
            
            .language-dropdown.active {
                transform: none;
            }
        }
        
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .examples-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 2rem 2rem;
            font-family: 'Inter', sans-serif;
        }
        
        .examples-header {
            text-align: center;
            margin-bottom: 4rem;
            padding: 3rem 2rem;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .examples-title {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }
        
        .examples-subtitle {
            font-size: 1.3rem;
            color: #5a6c7d;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .example-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .example-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .example-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .example-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 1rem;
        }
        
        .example-description {
            color: #5a6c7d;
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        
        .example-features {
            list-style: none;
            padding: 0;
            margin-bottom: 2rem;
        }
        
        .example-features li {
            color: #5a6c7d;
            margin-bottom: 0.5rem;
            padding-left: 1.5rem;
            position: relative;
        }
        
        .example-features li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #4CAF50;
            font-weight: bold;
        }
        
        .code-examples {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .code-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .code-section h2 {
            color: #2c3e50;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .code-section p {
            color: #5a6c7d;
            font-size: 1.1rem;
            margin-bottom: 1.5rem;
        }
        
        .code-block {
            background: linear-gradient(135deg, #2d3748 0%, #1a202c 100%);
            color: #e2e8f0;
            border-radius: 12px;
            margin: 1.5rem 0;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .code-header {
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .code-header span {
            color: #a0aec0;
            font-size: 0.9rem;
            text-transform: uppercase;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .copy-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }
        
        .copy-btn:hover {
            background: linear-gradient(135deg, #45a049 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
        }
        
        .code-block pre {
            padding: 1.5rem;
            margin: 0;
            overflow-x: auto;
            font-family: 'Fira Code', 'Monaco', 'Consolas', monospace;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        
        .code-block code {
            color: #e2e8f0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        @media (max-width: 768px) {
            .examples-container {
                padding: 100px 1rem 1rem;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .examples-title {
                font-size: 2.5rem;
            }
            
            .code-section {
                padding: 1.5rem;
            }
            
            .code-block pre {
                padding: 1rem;
                font-size: 0.8rem;
            }
            
            .code-header {
                padding: 0.75rem;
            }
        }
    </style>

    <div class="examples-container">
        <div class="examples-header">
            <h1 class="examples-title" data-i18n="examples.title">Integration Examples</h1>
            <p class="examples-subtitle" data-i18n="examples.subtitle">
                Ready-made solutions for integrating Cookie Widget into popular frameworks, CMS and analytics systems. 
                Copy the code and adapt it to your needs.
            </p>
        </div>

        <!-- Quick Examples Grid -->
        <div class="examples-grid">
            <div class="example-card">
                <span class="example-icon">‚öõÔ∏è</span>
                <h3 class="example-title" data-i18n="example.react.title">React / Next.js</h3>
                <p class="example-description" data-i18n="example.react.description">Modern integration for React applications with TypeScript support</p>
                <ul class="example-features">
                    <li data-i18n="example.react.feature1">TypeScript typing</li>
                    <li data-i18n="example.react.feature2">State management hooks</li>
                    <li data-i18n="example.react.feature3">SSR compatibility</li>
                    <li data-i18n="example.react.feature4">Dynamic script loading</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üü¢</span>
                <h3 class="example-title" data-i18n="example.vue.title">Vue.js / Nuxt.js</h3>
                <p class="example-description" data-i18n="example.vue.description">Integration for Vue ecosystem with composition API</p>
                <ul class="example-features">
                    <li data-i18n="example.vue.feature1">Composition API</li>
                    <li data-i18n="example.vue.feature2">Reactive settings</li>
                    <li data-i18n="example.vue.feature3">Nuxt.js plugin</li>
                    <li data-i18n="example.vue.feature4">Automatic initialization</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üìù</span>
                <h3 class="example-title" data-i18n="example.wordpress.title">WordPress</h3>
                <p class="example-description" data-i18n="example.wordpress.description">Simple WordPress integration with admin panel</p>
                <ul class="example-features">
                    <li data-i18n="example.wordpress.feature1">WordPress plugin</li>
                    <li data-i18n="example.wordpress.feature2">Admin panel settings</li>
                    <li data-i18n="example.wordpress.feature3">Theme compatibility</li>
                    <li data-i18n="example.wordpress.feature4">Shortcode support</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üìä</span>
                <h3 class="example-title" data-i18n="example.ga4.title">Google Analytics 4</h3>
                <p class="example-description" data-i18n="example.ga4.description">Full GA4 integration and event management</p>
                <ul class="example-features">
                    <li data-i18n="example.ga4.feature1">Conditional GA4 loading</li>
                    <li data-i18n="example.ga4.feature2">Consent tracking</li>
                    <li data-i18n="example.ga4.feature3">Privacy configuration</li>
                    <li data-i18n="example.ga4.feature4">Custom events</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üìà</span>
                <h3 class="example-title" data-i18n="example.yandex.title">Yandex.Metrica</h3>
                <p class="example-description" data-i18n="example.yandex.description">Integration with Russian analytics system</p>
                <ul class="example-features">
                    <li data-i18n="example.yandex.feature1">152-FZ compliance</li>
                    <li data-i18n="example.yandex.feature2">Goals and events</li>
                    <li data-i18n="example.yandex.feature3">Webvisor management</li>
                    <li data-i18n="example.yandex.feature4">Click maps</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üöÄ</span>
                <h3 class="example-title" data-i18n="example.advanced.title">Advanced Features v3.3</h3>
                <p class="example-description" data-i18n="example.advanced.description">Using new exclusive capabilities</p>
                <ul class="example-features">
                    <li data-i18n="example.advanced.feature1">Smart Auto-Detect trackers</li>
                    <li data-i18n="example.advanced.feature2">SEO-Friendly Mode</li>
                    <li data-i18n="example.advanced.feature3">Script Guard protection</li>
                    <li data-i18n="example.advanced.feature4">Zero-Reload Mode</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üîß</span>
                <h3 class="example-title" data-i18n="example.api.title">API Integration</h3>
                <p class="example-description" data-i18n="example.api.description">Programmatic control via JavaScript API</p>
                <ul class="example-features">
                    <li data-i18n="example.api.feature1">Events and callbacks</li>
                    <li data-i18n="example.api.feature2">Dynamic management</li>
                    <li data-i18n="example.api.feature3">Custom categories</li>
                    <li data-i18n="example.api.feature4">SPA integration</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üåç</span>
                <h3 class="example-title" data-i18n="example.multilang.title">Multilingual</h3>
                <p class="example-description" data-i18n="example.multilang.description">Support for multiple languages and localization</p>
                <ul class="example-features">
                    <li data-i18n="example.multilang.feature1">8 languages out of the box</li>
                    <li data-i18n="example.multilang.feature2">Auto language detection</li>
                    <li data-i18n="example.multilang.feature3">Custom translations</li>
                    <li data-i18n="example.multilang.feature4">RTL support</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üì±</span>
                <h3 class="example-title" data-i18n="example.mobile.title">Mobile Optimization</h3>
                <p class="example-description" data-i18n="example.mobile.description">Responsive design for mobile devices</p>
                <ul class="example-features">
                    <li data-i18n="example.mobile.feature1">Responsive design</li>
                    <li data-i18n="example.mobile.feature2">Touch-friendly interface</li>
                    <li data-i18n="example.mobile.feature3">PWA compatibility</li>
                    <li data-i18n="example.mobile.feature4">Performance optimization</li>
                </ul>
            </div>
            
            <div class="example-card">
                <span class="example-icon">üîí</span>
                <h3 class="example-title" data-i18n="example.security.title">Security and Privacy</h3>
                <p class="example-description" data-i18n="example.security.description">Maximum protection of user data</p>
                <ul class="example-features">
                    <li data-i18n="example.security.feature1">Secure Storage system</li>
                    <li data-i18n="example.security.feature2">Data encryption</li>
                    <li data-i18n="example.security.feature3">GDPR/CCPA compliance</li>
                    <li data-i18n="example.security.feature4">Security audit</li>
                </ul>
            </div>
        </div>

        </div>

        <!-- Code Examples Section -->
        <div class="code-examples">
            <!-- Basic Integration -->
            <div class="code-section">
                <h2 data-i18n="examples.basic.title">üöÄ Basic Integration</h2>
                <p data-i18n="examples.basic.description">The simplest way to connect the widget to your site</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>HTML</span>
                        <button class="copy-btn" onclick="copyCode(this)" data-i18n="ui.copy">Copy</button>
                    </div>
                    <pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;My Website&lt;/title&gt;
    &lt;link rel="stylesheet" href="https://cookies-widget-sergioplay.vercel.app/cookie-banner.css"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- Your content --&gt;
    &lt;h1&gt;Welcome to my website&lt;/h1&gt;
    
    &lt;footer&gt;
        &lt;a href="#cookie-settings" onclick="showCookieSettings(); return false;"&gt;
            Cookie Settings
        &lt;/a&gt;
    &lt;/footer&gt;
    
    &lt;script src="https://cookies-widget-sergioplay.vercel.app/cookie-banner.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                </div>
            </div>

            <!-- React Example -->
            <div class="code-section">
                <h2 data-i18n="examples.react.integration.title">‚öõÔ∏è React / Next.js Integration</h2>
                <p data-i18n="examples.react.integration.description">Complete example of Cookie Widget integration in React application</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>components/CookieManager.jsx</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>import { useEffect, useState } from 'react';

export default function CookieManager() {
    const [isLoaded, setIsLoaded] = useState(false);
    
    useEffect(() => {
        // Load CSS
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css';
        document.head.appendChild(link);
        
        // Load JavaScript
        const script = document.createElement('script');
        script.src = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js';
        script.async = true;
        script.onload = () => setIsLoaded(true);
        document.body.appendChild(script);
        
        // Listen for consent changes
        const handleConsentChange = (event) => {
            const settings = event.detail;
            console.log('Cookie consent changed:', settings);
            
            // Your processing logic
            if (settings.analytics) {
                // Enable analytics
            }
        };
        
        window.addEventListener('cookieConsentChanged', handleConsentChange);
        
        return () => {
            window.removeEventListener('cookieConsentChanged', handleConsentChange);
        };
    }, []);
    
    const showSettings = () => {
        if (window.cookieBanner) {
            window.cookieBanner.showSettings();
        }
    };
    
    return (
        &lt;div&gt;
            {isLoaded && (
                &lt;button onClick={showSettings} className="cookie-settings-btn"&gt;
                    üç™ Cookie Settings
                &lt;/button&gt;
            )}
        &lt;/div&gt;
    );
}</code></pre>
                </div>
            </div>

            <!-- Vue.js Example -->
            <div class="code-section">
                <h2 data-i18n="examples.vue.integration.title">üü¢ Vue.js Integration</h2>
                <p data-i18n="examples.vue.integration.description">Integration example with Vue.js using Composition API</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>components/CookieManager.vue</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;button v-if="isLoaded" @click="showSettings" class="cookie-settings-btn"&gt;
      üç™ Cookie Settings
    &lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup&gt;
import { ref, onMounted } from 'vue'

const isLoaded = ref(false)

onMounted(() => {
  // Load CSS
  const link = document.createElement('link')
  link.rel = 'stylesheet'
  link.href = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css'
  document.head.appendChild(link)
  
  // Load JavaScript
  const script = document.createElement('script')
  script.src = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js'
  script.async = true
  script.onload = () => isLoaded.value = true
  document.body.appendChild(script)
  
  // Listen for consent changes
  const handleConsentChange = (event) => {
    const settings = event.detail
    console.log('Cookie consent changed:', settings)
  }
  
  window.addEventListener('cookieConsentChanged', handleConsentChange)
})

const showSettings = () => {
  if (window.cookieBanner) {
    window.cookieBanner.showSettings()
  }
}
&lt;/script&gt;</code></pre>
                </div>
            </div>

            <!-- WordPress Example -->
            <div class="code-section">
                <h2 data-i18n="examples.wordpress.integration.title">üìù WordPress Integration</h2>
                <p data-i18n="examples.wordpress.integration.description">Simple Cookie Widget integration in WordPress</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>functions.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php
// Add Cookie Widget to WordPress
function add_cookie_widget() {
    // CSS
    wp_enqueue_style(
        'cookie-widget-css',
        'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css',
        array(),
        '1.0.0'
    );
    
    // JavaScript
    wp_enqueue_script(
        'cookie-widget-js',
        'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js',
        array(),
        '1.0.0',
        true
    );
}
add_action('wp_enqueue_scripts', 'add_cookie_widget');

// Add settings link to footer
function add_cookie_settings_link() {
    echo '&lt;a href="#cookie-settings" onclick="showCookieSettings(); return false;"&gt;Cookie Settings&lt;/a&gt;';
}
add_action('wp_footer', 'add_cookie_settings_link');
?&gt;</code></pre>
                </div>
            </div>

            <!-- Google Analytics Example -->
            <div class="code-section">
                <h2 data-i18n="examples.ga4.integration.title">üìä Google Analytics 4 Integration</h2>
                <p data-i18n="examples.ga4.integration.description">Integration with Google Analytics considering user consent</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>HTML + JavaScript</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;!-- Google tag (gtag.js) --&gt;
&lt;script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"&gt;&lt;/script&gt;
&lt;script&gt;
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  // Set default consent mode
  gtag('consent', 'default', {
    'analytics_storage': 'denied',
    'ad_storage': 'denied',
    'ad_user_data': 'denied',
    'ad_personalization': 'denied'
  });
  
  gtag('js', new Date());
  gtag('config', 'GA_MEASUREMENT_ID');
  
  // Listen for consent changes
  window.addEventListener('cookieConsentChanged', function(event) {
    const settings = event.detail;
    
    gtag('consent', 'update', {
      'analytics_storage': settings.analytics ? 'granted' : 'denied',
      'ad_storage': settings.marketing ? 'granted' : 'denied',
      'ad_user_data': settings.marketing ? 'granted' : 'denied',
      'ad_personalization': settings.marketing ? 'granted' : 'denied'
    });
  });
&lt;/script&gt;

&lt;!-- Cookie Widget --&gt;
&lt;link rel="stylesheet" href="https://cookies-widget-sergioplay.vercel.app/cookie-banner.css"&gt;
&lt;script src="https://cookies-widget-sergioplay.vercel.app/cookie-banner.js"&gt;&lt;/script&gt;</code></pre>
                </div>
            </div>

            <!-- Yandex Metrica Example -->
            <div class="code-section">
                <h2 data-i18n="examples.yandex.integration.title">üìà Yandex.Metrica Integration</h2>
                <p data-i18n="examples.yandex.integration.description">Integration with Yandex.Metrica with conditional loading</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>JavaScript</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;script&gt;
// Yandex.Metrica initialization function
function initYandexMetrica() {
  (function(m,e,t,r,i,k,a){
    m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
    m[i].l=1*new Date();
    k=e.createElement(t),a=e.getElementsByTagName(t)[0],
    k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
  })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  ym(YOUR_COUNTER_ID, "init", {
    clickmap:true,
    trackLinks:true,
    accurateTrackBounce:true,
    webvisor:true
  });
}

// Listen for consent changes
window.addEventListener('cookieConsentChanged', function(event) {
  const settings = event.detail;
  
  if (settings.analytics && typeof ym === 'undefined') {
    // Load Yandex.Metrica only if consent is given
    initYandexMetrica();
  }
});

// Check existing consent on page load
document.addEventListener('DOMContentLoaded', function() {
  if (window.cookieBanner) {
    const settings = window.cookieBanner.getSettings();
    if (settings && settings.analytics) {
      initYandexMetrica();
    }
  }
});
&lt;/script&gt;

&lt;noscript&gt;&lt;div&gt;&lt;img src="https://mc.yandex.ru/watch/YOUR_COUNTER_ID" style="position:absolute; left:-9999px;" alt="" /&gt;&lt;/div&gt;&lt;/noscript&gt;</code></pre>
                </div>
            </div>

            <!-- Angular Example -->
            <div class="code-section">
                <h2 data-i18n="examples.angular.title">üÖ∞Ô∏è Angular Integration</h2>
                <p data-i18n="examples.angular.description">Cookie Widget integration in Angular application with service</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>services/cookie.service.ts</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>import { Injectable } from '@angular/core';

declare global {
  interface Window {
    cookieBanner?: any;
    CookieBanner?: any;
  }
}

@Injectable({
  providedIn: 'root'
})
export class CookieService {
  private isLoaded = false;

  constructor() {
    this.loadCookieWidget();
  }

  private loadCookieWidget(): void {
    // Load CSS
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css';
    document.head.appendChild(link);

    // Load JavaScript
    const script = document.createElement('script');
    script.src = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js';
    script.async = true;
    script.onload = () => {
      this.isLoaded = true;
      this.setupEventListeners();
    };
    document.body.appendChild(script);
  }

  private setupEventListeners(): void {
    window.addEventListener('cookieConsentChanged', (event: any) => {
      const settings = event.detail;
      console.log('Cookie consent changed:', settings);
      
      // Your processing logic
      if (settings.analytics) {
        // Enable analytics
      }
    });
  }

  showSettings(): void {
    if (window.cookieBanner) {
      window.cookieBanner.showSettings();
    }
  }

  getSettings(): any {
    return window.cookieBanner?.getSettings();
  }
}</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>components/cookie-button.component.ts</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>import { Component } from '@angular/core';
import { CookieService } from '../services/cookie.service';

@Component({
  selector: 'app-cookie-button',
  template: `
    &lt;button 
      (click)="showSettings()" 
      class="cookie-settings-btn"
      *ngIf="cookieService.getSettings()"&gt;
      üç™ Cookie Settings
    &lt;/button&gt;
  `,
  styles: [`
    .cookie-settings-btn {
      position: fixed;
      bottom: 20px;
      left: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .cookie-settings-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
    }
  `]
})
export class CookieButtonComponent {
  constructor(public cookieService: CookieService) {}

  showSettings(): void {
    this.cookieService.showSettings();
  }
}</code></pre>
                </div>
            </div>

            <!-- Svelte Example -->
            <div class="code-section">
                <h2 data-i18n="examples.svelte.title">üß° Svelte Integration</h2>
                <p data-i18n="examples.svelte.description">Simple Cookie Widget integration in Svelte application</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>lib/CookieManager.svelte</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;script&gt;
  import { onMount } from 'svelte';
  
  let isLoaded = false;
  let cookieSettings = null;

  onMount(() => {
    // Load CSS
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css';
    document.head.appendChild(link);

    // Load JavaScript
    const script = document.createElement('script');
    script.src = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js';
    script.async = true;
    script.onload = () => {
      isLoaded = true;
      setupEventListeners();
    };
    document.body.appendChild(script);
  });

  function setupEventListeners() {
    window.addEventListener('cookieConsentChanged', (event) => {
      cookieSettings = event.detail;
      console.log('Cookie consent changed:', cookieSettings);
    });
  }

  function showSettings() {
    if (window.cookieBanner) {
      window.cookieBanner.showSettings();
    }
  }
&lt;/script&gt;

{#if isLoaded}
  &lt;button on:click={showSettings} class="cookie-settings-btn"&gt;
    üç™ Cookie Settings
  &lt;/button&gt;
{/if}

&lt;style&gt;
  .cookie-settings-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    transition: all 0.3s ease;
    z-index: 1000;
  }
  
  .cookie-settings-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
  }
&lt;/style&gt;</code></pre>
                </div>
            </div>

            <!-- Nuxt.js Plugin Example -->
            <div class="code-section">
                <h2 data-i18n="examples.nuxt.title">üíö Nuxt.js Plugin</h2>
                <p data-i18n="examples.nuxt.description">Creating a plugin for automatic initialization in Nuxt.js</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>plugins/cookie-widget.client.js</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>export default defineNuxtPlugin(() => {
  // Load CSS
  useHead({
    link: [
      {
        rel: 'stylesheet',
        href: 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css'
      }
    ]
  });

  // Load JavaScript
  const script = document.createElement('script');
  script.src = 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js';
  script.async = true;
  
  script.onload = () => {
    // Setup events
    window.addEventListener('cookieConsentChanged', (event) => {
      const settings = event.detail;
      
      // Integration with Nuxt Analytics
      if (settings.analytics && window.$gtag) {
        window.$gtag('consent', 'update', {
          'analytics_storage': 'granted'
        });
      }
      
      // Can use Nuxt composables
      const { $router } = useNuxtApp();
      console.log('Cookie consent changed on route:', $router.currentRoute.value.path);
    });
  };
  
  document.head.appendChild(script);

  // –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
  return {
    provide: {
      cookieWidget: {
        showSettings: () => {
          if (window.cookieBanner) {
            window.cookieBanner.showSettings();
          }
        },
        getSettings: () => {
          return window.cookieBanner?.getSettings();
        }
      }
    }
  };
});</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>components/CookieButton.vue</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;template&gt;
  &lt;button @click="showSettings" class="cookie-settings-btn"&gt;
    üç™ Cookie Settings
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
const { $cookieWidget } = useNuxtApp();

const showSettings = () => {
  $cookieWidget.showSettings();
};
&lt;/script&gt;

&lt;style scoped&gt;
.cookie-settings-btn {
  position: fixed;
  bottom: 20px;
  left: 20px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 25px;
  cursor: pointer;
  font-weight: 600;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  transition: all 0.3s ease;
  z-index: 1000;
}

.cookie-settings-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}
&lt;/style&gt;</code></pre>
                </div>
            </div>

            <!-- Drupal Example -->
            <div class="code-section">
                <h2 data-i18n="examples.drupal.title">üî∑ Drupal Integration</h2>
                <p data-i18n="examples.drupal.description">Creating a Drupal module with admin panel</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>cookie_widget.info.yml</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>name: Cookie Widget
type: module
description: 'Cookie Widget integration for GDPR compliance'
core_version_requirement: ^9 || ^10
package: Custom
dependencies:
  - drupal:system</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>cookie_widget.module</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php

/**
 * @file
 * Cookie Widget module.
 */

use Drupal\Core\Routing\RouteMatchInterface;

/**
 * Implements hook_help().
 */
function cookie_widget_help($route_name, RouteMatchInterface $route_match) {
  switch ($route_name) {
    case 'help.page.cookie_widget':
      return '&lt;p&gt;' . t('Cookie Widget –¥–ª—è GDPR —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è.') . '&lt;/p&gt;';
  }
}

/**
 * Implements hook_page_attachments().
 */
function cookie_widget_page_attachments(array &$attachments) {
  $config = \Drupal::config('cookie_widget.settings');
  
  if ($config->get('enabled')) {
    // Add CSS
    $attachments['#attached']['html_head'][] = [
      [
        '#tag' => 'link',
        '#attributes' => [
          'rel' => 'stylesheet',
          'href' => 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css',
        ],
      ],
      'cookie_widget_css'
    ];
    
    // Add JavaScript
    $attachments['#attached']['html_head'][] = [
      [
        '#tag' => 'script',
        '#attributes' => [
          'src' => 'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js',
          'async' => TRUE,
        ],
      ],
      'cookie_widget_js'
    ];
    
    // Add settings
    $attachments['#attached']['drupalSettings']['cookieWidget'] = [
      'privacyPolicyUrl' => $config->get('privacy_policy_url'),
      'siteName' => \Drupal::config('system.site')->get('name'),
    ];
    
    // Add initialization
    $attachments['#attached']['html_head'][] = [
      [
        '#tag' => 'script',
        '#value' => "
          document.addEventListener('DOMContentLoaded', function() {
            if (window.CookieBanner && drupalSettings.cookieWidget) {
              window.cookieBanner = new window.CookieBanner({
                privacyPolicyUrl: drupalSettings.cookieWidget.privacyPolicyUrl
              });
            }
          });
        ",
      ],
      'cookie_widget_init'
    ];
  }
}</code></pre>
                </div>
            </div>

            <!-- Joomla Example -->
            <div class="code-section">
                <h2 data-i18n="examples.joomla.title">üü† Joomla Integration</h2>
                <p data-i18n="examples.joomla.description">Creating a plugin for Joomla CMS</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>cookiewidget.xml</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;extension version="3.9" type="plugin" group="system" method="upgrade"&gt;
    &lt;name&gt;PLG_SYSTEM_COOKIEWIDGET&lt;/name&gt;
    &lt;author&gt;SerGioPlay&lt;/author&gt;
    &lt;creationDate&gt;2025-01-22&lt;/creationDate&gt;
    &lt;copyright&gt;Copyright (C) 2025. All rights reserved.&lt;/copyright&gt;
    &lt;license&gt;MIT&lt;/license&gt;
    &lt;authorEmail&gt;sergioplay@example.com&lt;/authorEmail&gt;
    &lt;version&gt;1.0.0&lt;/version&gt;
    &lt;description&gt;PLG_SYSTEM_COOKIEWIDGET_XML_DESCRIPTION&lt;/description&gt;
    
    &lt;files&gt;
        &lt;filename plugin="cookiewidget"&gt;cookiewidget.php&lt;/filename&gt;
    &lt;/files&gt;
    
    &lt;config&gt;
        &lt;fields name="params"&gt;
            &lt;fieldset name="basic"&gt;
                &lt;field
                    name="enabled"
                    type="radio"
                    label="PLG_SYSTEM_COOKIEWIDGET_ENABLED_LABEL"
                    description="PLG_SYSTEM_COOKIEWIDGET_ENABLED_DESC"
                    default="1"&gt;
                    &lt;option value="0"&gt;JNO&lt;/option&gt;
                    &lt;option value="1"&gt;JYES&lt;/option&gt;
                &lt;/field&gt;
                
                &lt;field
                    name="privacy_policy_url"
                    type="text"
                    label="PLG_SYSTEM_COOKIEWIDGET_PRIVACY_URL_LABEL"
                    description="PLG_SYSTEM_COOKIEWIDGET_PRIVACY_URL_DESC"
                    default="/privacy-policy" /&gt;
            &lt;/fieldset&gt;
        &lt;/fields&gt;
    &lt;/config&gt;
&lt;/extension&gt;</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>cookiewidget.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php
defined('_JEXEC') or die;

use Joomla\CMS\Plugin\CMSPlugin;
use Joomla\CMS\Factory;

class PlgSystemCookiewidget extends CMSPlugin
{
    protected $autoloadLanguage = true;

    public function onBeforeCompileHead()
    {
        if (!$this->params->get('enabled', 1)) {
            return;
        }

        $app = Factory::getApplication();
        $document = $app->getDocument();

        if ($document->getType() !== 'html') {
            return;
        }

        // Add CSS
        $document->addStyleSheet(
            'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css'
        );

        // Add JavaScript
        $document->addScript(
            'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js',
            ['async' => true]
        );

        // Add initialization
        $privacyUrl = $this->params->get('privacy_policy_url', '/privacy-policy');
        $siteName = $app->get('sitename');

        $script = "
        document.addEventListener('DOMContentLoaded', function() {
            if (window.CookieBanner) {
                window.cookieBanner = new window.CookieBanner({
                    privacyPolicyUrl: '{$privacyUrl}',
                    siteName: '{$siteName}'
                });
                
                // Event handling
                window.addEventListener('cookieConsentChanged', function(event) {
                    const settings = event.detail;
                    console.log('Joomla: Cookie consent changed', settings);
                });
            }
        });
        ";

        $document->addScriptDeclaration($script);
    }
}</code></pre>
                </div>
            </div>

            <!-- Bitrix Example -->
            <div class="code-section">
                <h2 data-i18n="examples.bitrix.title">üî∂ 1C-Bitrix Integration</h2>
                <p data-i18n="examples.bitrix.description">Cookie Widget integration in 1C-Bitrix via component</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>local/components/cookie.widget/.description.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();

$arComponentDescription = array(
    "NAME" => "Cookie Widget",
    "DESCRIPTION" => "Component for Cookie Widget integration with GDPR support",
    "ICON" => "/images/cookie_widget.gif",
    "SORT" => 10,
    "CACHE_PATH" => "Y",
    "PATH" => array(
        "ID" => "custom",
        "NAME" => "Custom Components",
        "CHILD" => array(
            "ID" => "cookie",
            "NAME" => "Cookie Management"
        )
    ),
);</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>local/components/cookie.widget/.parameters.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();

$arComponentParameters = array(
    "PARAMETERS" => array(
        "PRIVACY_POLICY_URL" => array(
            "PARENT" => "BASE",
            "NAME" => "Privacy Policy URL",
            "TYPE" => "STRING",
            "DEFAULT" => "/privacy-policy/",
        ),
        "AUTO_SHOW" => array(
            "PARENT" => "BASE",
            "NAME" => "Auto show banner",
            "TYPE" => "CHECKBOX",
            "DEFAULT" => "Y",
        ),
        "THEME" => array(
            "PARENT" => "BASE",
            "NAME" => "Theme",
            "TYPE" => "LIST",
            "VALUES" => array(
                "light" => "Light",
                "dark" => "Dark",
                "modern" => "Modern",
            ),
            "DEFAULT" => "modern",
        ),
        "POSITION" => array(
            "PARENT" => "BASE",
            "NAME" => "Banner position",
            "TYPE" => "LIST",
            "VALUES" => array(
                "bottom" => "Bottom",
                "top" => "Top",
                "center" => "Center",
            ),
            "DEFAULT" => "bottom",
        ),
        "CACHE_TIME" => array("DEFAULT" => 3600),
    ),
);</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>local/components/cookie.widget/component.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php
if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die();

use Bitrix\Main\Page\Asset;
use Bitrix\Main\Config\Option;

class CookieWidgetComponent extends CBitrixComponent
{
    public function executeComponent()
    {
        // Connect CSS
        Asset::getInstance()->addCss(
            'https://cookies-widget-sergioplay.vercel.app/cookie-banner.css'
        );
        
        // Connect JavaScript
        Asset::getInstance()->addJs(
            'https://cookies-widget-sergioplay.vercel.app/cookie-banner.js'
        );
        
        // Prepare parameters
        $this->arResult = array(
            'PRIVACY_POLICY_URL' => $this->arParams['PRIVACY_POLICY_URL'],
            'AUTO_SHOW' => $this->arParams['AUTO_SHOW'] === 'Y',
            'THEME' => $this->arParams['THEME'],
            'POSITION' => $this->arParams['POSITION'],
            'SITE_NAME' => Option::get('main', 'site_name'),
        );
        
        // Add JavaScript initialization
        $initScript = "
        document.addEventListener('DOMContentLoaded', function() {
            if (window.CookieBanner) {
                window.cookieBanner = new window.CookieBanner({
                    autoShow: " . ($this->arResult['AUTO_SHOW'] ? 'true' : 'false') . ",
                    theme: '" . $this->arResult['THEME'] . "',
                    position: '" . $this->arResult['POSITION'] . "',
                    privacyPolicyUrl: '" . $this->arResult['PRIVACY_POLICY_URL'] . "',
                    siteName: '" . $this->arResult['SITE_NAME'] . "'
                });
                
                // Integration with Bitrix analytics
                window.addEventListener('cookieConsentChanged', function(event) {
                    const settings = event.detail;
                    
                    // Send event to Bitrix
                    if (typeof BX !== 'undefined' && BX.ajax) {
                        BX.ajax.runAction('cookie:widget.consent.save', {
                            data: {
                                settings: settings,
                                timestamp: new Date().getTime()
                            }
                        });
                    }
                    
                    // Yandex.Metrica management
                    if (settings.analytics && typeof ym !== 'undefined') {
                        ym('COUNTER_ID', 'userParams', {
                            cookieConsent: 'granted'
                        });
                    }
                });
            }
        });
        ";
        
        Asset::getInstance()->addString($initScript, true);
        
        $this->includeComponentTemplate();
    }
}

$component = new CookieWidgetComponent();
$component->executeComponent();</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>local/components/cookie.widget/templates/.default/template.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php if (!defined("B_PROLOG_INCLUDED") || B_PROLOG_INCLUDED!==true) die(); ?&gt;

&lt;div class="cookie-widget-bitrix"&gt;
    &lt;!-- Cookie settings button --&gt;
    &lt;button 
        onclick="if(window.cookieBanner) window.cookieBanner.showSettings();" 
        class="cookie-settings-btn-bitrix"
        title="Cookie Settings"&gt;
        üç™ Cookie Settings
    &lt;/button&gt;
&lt;/div&gt;

&lt;style&gt;
.cookie-settings-btn-bitrix {
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 24px;
    border-radius: 25px;
    cursor: pointer;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    transition: all 0.3s ease;
    z-index: 10000;
    font-family: Arial, sans-serif;
    font-size: 14px;
}

.cookie-settings-btn-bitrix:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
}

@media (max-width: 768px) {
    .cookie-settings-btn-bitrix {
        bottom: 10px;
        left: 10px;
        padding: 10px 20px;
        font-size: 12px;
    }
}
&lt;/style&gt;</code></pre>
                </div>
            </div>

            <!-- Laravel Example -->
            <div class="code-section">
                <h2 data-i18n="examples.laravel.title">üî¥ Laravel Integration</h2>
                <p data-i18n="examples.laravel.description">Creating a Laravel package with middleware and service provider</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>app/Http/Middleware/CookieWidget.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php

namespace App\Http\Middleware;

use Closure;
use Illuminate\Http\Request;

class CookieWidget
{
    public function handle(Request $request, Closure $next)
    {
        $response = $next($request);
        
        // Add Cookie Widget only for HTML pages
        if ($response->headers->get('Content-Type') === 'text/html; charset=UTF-8') {
            $content = $response->getContent();
            
            // Add CSS and JS to head
            $cookieWidgetAssets = '
                &lt;link rel="stylesheet" href="https://cookies-widget-sergioplay.vercel.app/cookie-banner.css"&gt;
                &lt;script src="https://cookies-widget-sergioplay.vercel.app/cookie-banner.js" async&gt;&lt;/script&gt;
                &lt;script&gt;
                    document.addEventListener("DOMContentLoaded", function() {
                        if (window.CookieBanner) {
                            window.cookieBanner = new window.CookieBanner({
                                privacyPolicyUrl: "' . route('privacy-policy') . '",
                                siteName: "' . config('app.name') . '"
                            });
                            
                            // Send events to Laravel
                            window.addEventListener("cookieConsentChanged", function(event) {
                                fetch("' . route('cookie.consent') . '", {
                                    method: "POST",
                                    headers: {
                                        "Content-Type": "application/json",
                                        "X-CSRF-TOKEN": "' . csrf_token() . '"
                                    },
                                    body: JSON.stringify({
                                        settings: event.detail,
                                        timestamp: new Date().toISOString()
                                    })
                                });
                            });
                        }
                    });
                &lt;/script&gt;
            ';
            
            $content = str_replace('&lt;/head&gt;', $cookieWidgetAssets . '&lt;/head&gt;', $content);
            $response->setContent($content);
        }
        
        return $response;
    }
}</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>app/Http/Controllers/CookieConsentController.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Log;

class CookieConsentController extends Controller
{
    public function store(Request $request)
    {
        $validated = $request->validate([
            'settings' => 'required|array',
            'settings.necessary' => 'boolean',
            'settings.functional' => 'boolean',
            'settings.analytics' => 'boolean',
            'settings.marketing' => 'boolean',
            'timestamp' => 'required|date'
        ]);
        
        // Log consent for audit
        Log::info('Cookie consent updated', [
            'user_ip' => $request->ip(),
            'user_agent' => $request->userAgent(),
            'settings' => $validated['settings'],
            'timestamp' => $validated['timestamp']
        ]);
        
        // Save to session
        session(['cookie_consent' => $validated['settings']]);
        
        // If user is authenticated, save to database
        if (auth()->check()) {
            auth()->user()->update([
                'cookie_consent' => json_encode($validated['settings']),
                'cookie_consent_updated_at' => now()
            ]);
        }
        
        return response()->json(['status' => 'success']);
    }
    
    public function show()
    {
        $consent = session('cookie_consent');
        
        if (auth()->check() && !$consent) {
            $userConsent = auth()->user()->cookie_consent;
            $consent = $userConsent ? json_decode($userConsent, true) : null;
        }
        
        return response()->json(['consent' => $consent]);
    }
}</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>routes/web.php</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>&lt;?php

use App\Http\Controllers\CookieConsentController;

// Routes for Cookie Widget
Route::post('/cookie/consent', [CookieConsentController::class, 'store'])
    -&gt;name('cookie.consent');

Route::get('/cookie/consent', [CookieConsentController::class, 'show'])
    -&gt;name('cookie.consent.show');

// Add middleware to all web routes
Route::middleware(['web', 'cookie.widget'])-&gt;group(function () {
    // Your routes here
});</code></pre>
                </div>
            </div>

            <!-- Django Example -->
            <div class="code-section">
                <h2 data-i18n="examples.django.title">üêç Django Integration</h2>
                <p data-i18n="examples.django.description">Creating a Django application with middleware for Cookie Widget</p>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>cookie_widget/middleware.py</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>from django.utils.deprecation import MiddlewareMixin
from django.conf import settings
from django.urls import reverse
import json

class CookieWidgetMiddleware(MiddlewareMixin):
    def process_response(self, request, response):
        # Add Cookie Widget only for HTML pages
        if (response.get('Content-Type', '').startswith('text/html') and 
            hasattr(response, 'content')):
            
            content = response.content.decode('utf-8')
            
            # Generate scripts for Cookie Widget
            cookie_widget_html = f'''
                &lt;link rel="stylesheet" href="https://cookies-widget-sergioplay.vercel.app/cookie-banner.css"&gt;
                &lt;script src="https://cookies-widget-sergioplay.vercel.app/cookie-banner.js" async&gt;&lt;/script&gt;
                &lt;script&gt;
                    document.addEventListener('DOMContentLoaded', function() {{
                        if (window.CookieBanner) {{
                            window.cookieBanner = new window.CookieBanner({{
                                privacyPolicyUrl: "{reverse('privacy_policy')}",
                                siteName: "{getattr(settings, 'SITE_NAME', 'Django Site')}"
                            }});
                            
                            // Send events to Django
                            window.addEventListener('cookieConsentChanged', function(event) {{
                                fetch("{reverse('cookie_consent')}", {{
                                    method: 'POST',
                                    headers: {{
                                        'Content-Type': 'application/json',
                                        'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
                                    }},
                                    body: JSON.stringify({{
                                        settings: event.detail,
                                        timestamp: new Date().toISOString()
                                    }})
                                }});
                            }});
                        }}
                    }});
                &lt;/script&gt;
            '''
            
            # Insert before closing head tag
            content = content.replace('&lt;/head&gt;', cookie_widget_html + '&lt;/head&gt;')
            response.content = content.encode('utf-8')
            response['Content-Length'] = len(response.content)
        
        return response</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>cookie_widget/views.py</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>from django.http import JsonResponse
from django.views.decorators.csrf import csrf_exempt
from django.views.decorators.http import require_http_methods
from django.contrib.auth.decorators import login_required
from django.utils.decorators import method_decorator
from django.views import View
import json
import logging

logger = logging.getLogger(__name__)

@method_decorator(csrf_exempt, name='dispatch')
class CookieConsentView(View):
    def post(self, request):
        try:
            data = json.loads(request.body)
            settings = data.get('settings', {})
            timestamp = data.get('timestamp')
            
            # Data validation
            required_keys = ['necessary', 'functional', 'analytics', 'marketing']
            if not all(key in settings for key in required_keys):
                return JsonResponse({'error': 'Invalid settings'}, status=400)
            
            # Log consent
            logger.info(f'Cookie consent updated: {settings}', extra={
                'user_ip': self.get_client_ip(request),
                'user_agent': request.META.get('HTTP_USER_AGENT'),
                'timestamp': timestamp
            })
            
            # Save to session
            request.session['cookie_consent'] = settings
            
            # If user is authenticated, save to profile
            if request.user.is_authenticated:
                profile = request.user.profile
                profile.cookie_consent = json.dumps(settings)
                profile.save()
            
            return JsonResponse({'status': 'success'})
            
        except json.JSONDecodeError:
            return JsonResponse({'error': 'Invalid JSON'}, status=400)
        except Exception as e:
            logger.error(f'Error saving cookie consent: {str(e)}')
            return JsonResponse({'error': 'Server error'}, status=500)
    
    def get(self, request):
        consent = request.session.get('cookie_consent')
        
        if request.user.is_authenticated and not consent:
            try:
                profile = request.user.profile
                if profile.cookie_consent:
                    consent = json.loads(profile.cookie_consent)
            except:
                pass
        
        return JsonResponse({'consent': consent})
    
    def get_client_ip(self, request):
        x_forwarded_for = request.META.get('HTTP_X_FORWARDED_FOR')
        if x_forwarded_for:
            ip = x_forwarded_for.split(',')[0]
        else:
            ip = request.META.get('REMOTE_ADDR')
        return ip</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>cookie_widget/urls.py</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code>from django.urls import path
from . import views

app_name = 'cookie_widget'

urlpatterns = [
    path('consent/', views.CookieConsentView.as_view(), name='cookie_consent'),
]</code></pre>
                </div>

                <div class="code-block">
                    <div class="code-header">
                        <span>settings.py (add)</span>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code># Add to MIDDLEWARE
MIDDLEWARE = [
    # ... other middleware
    'cookie_widget.middleware.CookieWidgetMiddleware',
]

# Add to INSTALLED_APPS
INSTALLED_APPS = [
    # ... other apps
    'cookie_widget',
]

# Cookie Widget settings
SITE_NAME = 'My Django Site'

# Logging for Cookie Widget
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'cookie_file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': 'cookie_consent.log',
        },
    },
    'loggers': {
        'cookie_widget': {
            'handlers': ['cookie_file'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}</code></pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Copy code functionality
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const code = codeBlock.querySelector('code');
            
            if (code) {
                const text = code.textContent;
                
                if (navigator.clipboard && window.isSecureContext) {
                    navigator.clipboard.writeText(text).then(() => {
                        showCopySuccess(button);
                    }).catch(() => {
                        fallbackCopyTextToClipboard(text, button);
                    });
                } else {
                    fallbackCopyTextToClipboard(text, button);
                }
            }
        }
        
        function fallbackCopyTextToClipboard(text, button) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess(button);
            } catch (err) {
                console.error('Fallback: Oops, unable to copy', err);
            }
            
            document.body.removeChild(textArea);
        }
        
        function showCopySuccess(button) {
            const originalText = button.textContent;
            const copiedText = window.i18n ? window.i18n.t('ui.copied') : 'Copied!';
            button.textContent = copiedText;
            button.style.background = 'linear-gradient(135deg, #45a049 0%, #4CAF50 100%)';
            
            setTimeout(() => {
                button.textContent = originalText;
                button.style.background = 'linear-gradient(135deg, #4CAF50 0%, #45a049 100%)';
            }, 2000);
        }

        // Auto-update year in footer
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('currentYear').textContent = new Date().getFullYear();
            
            // Add data-i18n attributes to all copy buttons
            const copyButtons = document.querySelectorAll('.copy-btn');
            copyButtons.forEach(button => {
                if (!button.hasAttribute('data-i18n')) {
                    button.setAttribute('data-i18n', 'ui.copy');
                }
            });
            
            // Initialize translations
            if (window.i18n && window.i18n.init) {
                window.i18n.init();
            }
        });
    </script>
    
    <!-- Footer -->
    <footer class="footer" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 2rem 0; margin-top: 3rem;">
        <div class="container" style="max-width: 1200px; margin: 0 auto; padding: 0 2rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <p>&copy; <span id="currentYear">2025</span> SerGioPlay. <span data-i18n="footer.copyright">–†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT.</span></p>
                </div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <a href="https://github.com/SerGioPlay01" target="_blank" aria-label="GitHub" style="color: white; opacity: 0.8; transition: opacity 0.3s;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                        </svg>
                    </a>
                    <a href="https://x.com/_SerGio_Play_" target="_blank" aria-label="X (Twitter)" style="color: white; opacity: 0.8; transition: opacity 0.3s;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.80l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </a>
                    <a href="https://instagram.com/_sergio_play_" target="_blank" aria-label="Instagram" style="color: white; opacity: 0.8; transition: opacity 0.3s;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Auto-update year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();
    </script>

    <!-- Cookie Widget Scripts - –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <script src="i18n.js"></script>
    <script src="cookie-banner.js"></script>

    <!-- Buy Me a Coffee Widget -->
    <script data-name="BMC-Widget" data-cfasync="false" src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js" data-id="sergioplay" data-description="Support me on Buy me a coffee!" data-message="" data-color="#40DCA5" data-position="Right" data-x_margin="18" data-y_margin="18"></script>
</body>
</html>